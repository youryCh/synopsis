## TCP

**TCP** - клиент-серверный протокол; позволяет общаться процессам как на одном компе, так и на разных.

> Подключение по TCP идёт из конкретного процесса в конкретный процесс.  
> Для TCP соединения нужны 2 параметра:  
> - ip адрес  
> - порт  
>
> Ip обычно устанавливается автоматически, порт обычно назначает разработчик.

> Сервер при старте указывает ip-адрес и порт, на котором нужно запускаться.

___

**URL** состоит из `protocol/host:port`.

```
  https://www.site.com

protocol |    host    | hidden port
```

> Порт обычно скрыт; по дефолту это 80 для http и 443 для https.

___

## Идемпотентность

> **Идемпотентность** - получать один и тот же результат при многих вызовах.

`GET, PUT, DELETE, HEAD` - идемпотентные.

`POST` - не идемпотентный.

> Например POST запрос создаст столько записей в db, сколько раз будет вызван.

___

`GET` - не имеет тела запроса (хотя технически может иметь тело, но не стоит).

___

## POST vs PUT

- POST - для создания новой записи, PUT - для изменения существующей
- Также POST не идемпотентен

___

> **HTTPS** - по сути обёртка над http-протоколом, которая добавляет дополнительные криптографические  
> протоколы SSL и TLS.

___

## REST API. Best Practices

1. Ендпоинт должен быть существительным, не глаголом;  
`/getItems`, `/updateItems`  - плохо  
`/items` - хорошо; а операции (get, update) разделять методами  
2. Использовать множественное число  
`/items/{item_id}`  
3. Версионировать лучше в заголовках, а не в URI  
`host/v2/items` - плохо  
`GET /items`  
`"Accept": "application/v1"` - хорошо  
4. При отправки большого объёма данных использовать пагинацию.

___

## HTTP methods

> **Безопасный метод** - который не изменяет состояние данных.

| HTTP method | Safe | Idempotent |
|-------------|------|------------|
| GET         | +    | +          |
| POST        | -    | -          |
| PUT         | -    | +          |
| DELETE      | -    | +          |
| OPTIONS     | +    | +          |
| HEADS       | +    | +          |

> **GET** - безопасный, идемпотентный, для получения данных ресурса.

> **POST** - для создания новых ресурсов.

> **PUT** - для обновления ресурсов, идемпотентный, поэтому больше подходит для обновления чем POST.

> **OPTIONS** - не используется для манипуляции ресурсом; для получения информации о ресурсе;  
> используется браузером для preflight-запроса для сложных запросов.

> **HEAD** - для запроса ресурса, как и GET, но возвращает только заголовки с информацией о ресурсе, не сам ресурс;  
> позволяет узнать существует ли ресурс, размер ресурса, дату изменения/создания;  
> экономит время и трафик.

___


