**URL** состоит из `protocol/host:port`.

```
  https://www.site.com

protocol |    host    | hidden port
```

> Порт обычно скрыт; по дефолту это 80 для http и 443 для https.

___

## Идемпотентность

> **Идемпотентность** - получать один и тот же результат при многих вызовах.

`GET, PUT, DELETE, HEAD` - идемпотентные.

`POST` - не идемпотентный.

> Например POST запрос создаст столько записей в db, сколько раз будет вызван.

___

`GET` - не имеет тела запроса (хотя технически может иметь тело, но не стоит).

___

## POST vs PUT

- POST - для создания новой записи, PUT - для изменения существующей
- Также POST не идемпотентен

___

> **HTTPS** - по сути обёртка над http-протоколом, которая добавляет дополнительные криптографические  
> протоколы SSL и TLS.

___

## REST API. Best Practices

1. Ендпоинт должен быть существительным, не глаголом;  
`/getItems`, `/updateItems`  - плохо  
`/items` - хорошо; а операции (get, update) разделять методами  
2. Использовать множественное число  
`/items/{item_id}`  
3. Версионировать лучше в заголовках, а не в URI  
`host/v2/items` - плохо  
`GET /items`  
`"Accept": "application/v1"` - хорошо  
4. При отправки большого объёма данных использовать пагинацию.

___

## HTTP methods

> **Безопасный метод** - который не изменяет состояние данных.

| HTTP method | Safe | Idempotent |
|-------------|------|------------|
| GET         | +    | +          |
| POST        | -    | -          |
| PUT         | -    | +          |
| DELETE      | -    | +          |
| OPTIONS     | +    | +          |
| HEADS       | +    | +          |

> **GET** - безопасный, идемпотентный, для получения данных ресурса.

> **POST** - для создания новых ресурсов.

> **PUT** - для обновления ресурсов, идемпотентный, поэтому больше подходит для обновления чем POST.

> **OPTIONS** - не используется для манипуляции ресурсом; для получения информации о ресурсе;  
> используется браузером для preflight-запроса для сложных запросов.

> **HEAD** - для запроса ресурса, как и GET, но возвращает только заголовки с информацией о ресурсе, не сам ресурс;  
> позволяет узнать существует ли ресурс, размер ресурса, дату изменения/создания;  
> экономит время и трафик.

___

## Status Code

**200 - success**
- 200 OK - (POST, который не создал ресурс тоже вернёт 200)  
- 201 Created - (POST создал ресурс)
- 204 No content - успешный запрос без тела, например при DELETE

**300 - redirect**  
- 304 Not modified - неявный редирект на кешированный ресурс

**400 - client error**
- 400 Bad request - кривой запрос
- 401 Unauthorized - не действительны данные аутентификации
- 403 Forbidden - аутентификация успешна, но пользователь не авторизован (нет доступа)
- 404 Not found - ресурс не существует
- 405 Method not allowed - метод не разрешён
- 410 Gone - ресурс больше не доступен (при запросе к старой api)
- 415 Unsupported media type - неподдерживаемый формат в теле запроса
- 422 Unprocessable entity - сервер не может выполнить инструкции запроса
- 429 Too many request - запрос отклонён из-за ограничения частоты
