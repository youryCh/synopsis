## npm ci

> Устанавливает зависимости из package-lock.json, а не из package.json. Это для воспроизводимости сборок, особенно важно для ci-cd. 

> До этого такого эффекта достигали архивированием node_modules.

> npm ci намного быстрее npm i

> Если npm ci не доступен то: `npm install -g npm@latest`

___

## npm error ssl

`npm config set strict-ssl false`

`npm config list` - текущий конфиг.

___

## About packages

`npm ls` - показать дерево зависимостей проекта/конкретного пакета.
  - `<package_name>` - сабзависимости конкретного пакета
  - `--json`
  - `--depth=0` - только прямые зависимости

> **deduped** - дедупликация, т.е. npm обнаружил дубль зависимости и установил пакет только 1 раз.

> **npm проект** - любая директория с манифестом.

> **npm registry** - хранилище опубликованных пакетов.

> **package.json** - манифест проекта; содержит список зависимостей, скрипты и много доп. инфо.  
> Манифест создаётся либо вручную, либо `npm init`.

> **Транзитивные зависимости** - зависимости зависимостей; можно посмотреть в package-lock.json.

> **dependencies** - основной список зависимостей, без которых код не заработает.

> **devDependencies** - зависимости этапа разработки, не для рантайма (typescript, webpack, eslint, etc.).  
> В своём опубликованном пакете такие зависимости не будут устанавливаться при использовании пакета внешними пользователями.

> **peerDependencies** - используется для разработки публикуемых пакетов; помогает избежать дублей; не устанавливаются автоматически.  
> Например если публикуемый пакет требует react, и приложение использующее этот пакет тоже требует react, тогда react в опубликованном пакете должен быть в peerDependencies. Иначе две установки react приведут к ошибке.

> **optionalDependencies** - некритичные зависимости; если npm не смог установить, то игнорирует без ошибки.

> **Инициализатор** - специальный npm-пакет для инициализации конкретного приложения, генерирует нужный бойлерплейт.
```
// example
npm init react-app -- my-app
```

`npm i/install` - установка зависимости, свежая стабильная версия.
  - `-P/--save-prod` - установка в dependencies (default)
  - `-D/--save-dev` - установка в devDependencies
  - `-O/--save-optional` - в optionalDependencies
  - `--only=prod`
  - `--only=dev`

> В **peerDependencies** устанавливать вручную.

```
// установить конкретную версию
npm i lodash@3.9.2

// установить все зависимости из манифеста
npm i
```

`changelog.md` - лог изменений пакета.

`npm outdated` - выведет список устаревших прямых зависимостей.
  - `--depth=9999` - проверит все транзитивные зависимости